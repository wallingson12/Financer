{% extends "base.html" %}

{% block content %}
<div class="container">

  <div class="card">
    <p class="card-title">Novo Investimento</p>
    <form action="/investimentos/salvar" method="POST">
      <div class="form-grid">
        <div class="form-group">
          <label>Papel (ticker)</label>
          <input type="text" name="papel" placeholder="ex: PETR4" required/>
        </div>
        <div class="form-group">
          <label>Saldo (R$)</label>
          <input type="number" name="saldo" placeholder="ex: 1500.00" step="0.01" required/>
        </div>
        <div class="form-group full">
          <label>Descrição</label>
          <input type="text" name="descricao" placeholder="ex: Petrobras PN"/>
        </div>
      </div>
      <div style="margin-top:16px">
        <button type="submit">+ Adicionar</button>
      </div>
    </form>
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <div class="card">
    <p class="card-title">Carteira por Papel</p>

    {% if investimentos %}
    <table class="tabela-investimentos">
      <thead>
        <tr>
          <th>Descrição</th>
          <th>Saldo</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for inv in investimentos %}
        <tr>
          <td>{{ inv.descricao }}</td>
          <td>R$ {{ "%.2f"|format(inv.saldo) }}</td>
          <td>
            <form action="/investimentos/remover/{{ inv.id }}" method="POST">
            <button type="submit" class="btn-remover">Remover</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
      <p style="color: #888; text-align: center; padding: 24px 0;">Nenhum investimento cadastrado.</p>
    {% endif %}
  </div>

</div>

<style>
  .tabela-investimentos {
    width: 100%;
    border-collapse: collapse;
    margin-top: 8px;
  }

  .tabela-investimentos th {
    text-align: left;
    padding: 10px 14px;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-bottom: 2px solid #e0e0e0;
    color: #888;
  }

  .tabela-investimentos td {
    padding: 12px 14px;
    border-bottom: 1px solid #f0f0f0;
    font-size: 0.9rem;
    vertical-align: middle;
  }

  .tabela-investimentos tr:last-child td {
    border-bottom: none;
  }

  .tabela-investimentos tr:hover td {
    background: #fafafa;
  }
</style>
{% endblock %}